<class name="http response">
    This class contains HTTP response information alongside with information
    that is specific for the Virgil services.

    <require class="json object"/>

    <property name="headers" class="http header list"/>
    <property name="body" class="str buffer"/>
    <property name="body json object" class="json object"/>
    <property name="body json array" class="json array"/>
    <property name="status code" type="size"/>


    <constant name="k json key service error code" type="string" visibility="private">
        <value value="code"/>
    </constant>


    <constant name="k json key service error message" type="string" visibility="private">
        <value value="message"/>
    </constant>


    <constructor name="with status">
        Create response with a status only.

        <argument name="status code" type="size"/>
    </constructor>


    <constructor name="with body">
        Create response with a status and body.

        <argument name="status code" type="size"/>
        <argument name="body" class="str"/>
    </constructor>


    <method name="set status">
        Set HTTP status.

        <argument name="status code" type="size"/>
    </method>


    <method name="set body">
        Set HTTP body.

        <argument name="body" class="str"/>
    </method>


    <method name="set body disown" scope="internal">
        Set HTTP body.

        <argument name="body" class="str buffer" access="disown"/>
    </method>


    <method name="add header">
        Add HTTP header.

        <argument name="name" class="str"/>
        <argument name="value" class="str"/>
    </method>


    <method name="is success" is_const="1">
        Return true if underlying status code is in range [200..299].

        <return type="boolean"/>
    </method>


    <method name="status code" is_const="1">
        Return HTTP status code.

        <return type="size"/>
    </method>


    <method name="body" is_const="1">
        Return HTTP body.

        <return class="str"/>
    </method>


    <method name="headers" is_const="1">
        Return HTTP headers.

        <return class="http header list"/>
    </method>


    <method name="find header" is_const="1">
        Find header by it's name.

        <argument name="name" class="str"/>
        <argument name="error" class="error"/>

        <return class="str"/>
    </method>


    <method name="body is json object" is_const="1">
        Return true if response handles a valid body as JSON object.

        <return type="boolean"/>
    </method>


    <method name="body is json array" is_const="1">
        Return true if response handles a valid body as JSON array.

        <return type="boolean"/>
    </method>


    <method name="body as json object" is_const="1">
        Return response body as JSON object.

        <return class="json object"/>
    </method>


    <method name="body as json array" is_const="1">
        Return response body as JSON array.

        <return class="json array"/>
    </method>


    <method name="has service error" is_const="1">
        Return true if response handles a service error and it's description.

        <return type="boolean"/>
    </method>


    <method name="service error code" is_const="1">
        Return service error code.

        <return type="size"/>
    </method>


    <method name="service error description" is_const="1">
        Return service error description.
        Note, empty string can be returned.

        <return class="str"/>
    </method>


    <method name="is status code success" is_static="1">
        Check status code range [200..299].

        <argument name="http status code" type="size"/>

        <return type="boolean"/>
    </method>
</class>
