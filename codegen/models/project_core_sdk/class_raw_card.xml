<class name="raw card">
    Represent model in binary form which can have signatures and corresponds to Virgil Cards Service model.


    <require class="json object"/>
    <require class="json object" api="private"/>
    <require class="json array"/>
    <require class="json array" api="private"/>

    <property name="content" class="json object"/>
    <property name="content snapshot" class="buffer"/>
    <property name="signatures" class="raw card signature list"/>
    <property name="public_key" class="buffer"/>
    <property name="is outdated" type="boolean"/>


    <constant name="k default version" type="string" visibility="private">
        Default Virgil Card version.

        <value value="5.0"/>
    </constant>


    <constant name="k json key public key" type="string" visibility="private">
        JSON key: public_key

        <value value="public_key"/>
    </constant>


    <constant name="k json key identity" type="string" visibility="private">
        JSON key: identity

        <value value="identity"/>
    </constant>


    <constant name="k json key card type" type="string" visibility="private">
        JSON key: card_type

        <value value="card_type"/>
    </constant>


    <constant name="k json key previous card id" type="string" visibility="private">
        JSON key: previous_card_id

        <value value="previous_card_id"/>
    </constant>


    <constant name="k json key version" type="string" visibility="private">
        JSON key: version

        <value value="version"/>
    </constant>


    <constant name="k json key created at" type="string" visibility="private">
        JSON key: created_at

        <value value="created_at"/>
    </constant>


    <constant name="k json key content snapshot" type="string" visibility="private">
        JSON key: content_snapshot

        <value value="content_snapshot"/>
    </constant>


    <constant name="k json key signatures" type="string" visibility="private">
        JSON key: signatures

        <value value="signatures"/>
    </constant>


    <constructor name="with">
        Create raw card with mandatory info.

        <argument name="identity" class="str"/>
        <argument name="public key" class="data"/>
        <argument name="created at" type="size"/>
    </constructor>


    <constructor name="with disown" visibility="private">
        Create raw card with mandatory info.

        <argument name="identity" class="str"/>
        <argument name="public key" class="buffer" access="disown"/>
        <argument name="created at" type="size"/>
    </constructor>


    <constructor name="with imported" declaration="private">
        Create raw card with imported values.

        <argument name="content" class="json object" access="disown"/>
        <argument name="content snapshot" class="buffer" access="disown"/>
        <argument name="public key" class="buffer" access="disown"/>
        <argument name="signatures" class="raw card signature list" access="disown"/>
    </constructor>


    <method name="import from json" is_static="1">
        Create raw card from JSON representation.

        <argument name="json" class="json object"/>
        <argument name="error" class="error" access="readwrite"/>

        <return class="self" access="disown"/>
    </method>


    <method name="import from json str" is_static="1">
        Create raw card from JSON string representation.

        <argument name="str" class="str"/>
        <argument name="error" class="error" access="readwrite"/>

        <return class="self" access="disown"/>
    </method>


    <method name="export as json" is_const="1">
        Export Raw Card as JSON.

        <return class="json object" access="disown"/>
    </method>


    <method name="set previous card id">
        Set optional previous card identifier.

        Note, previous card identity and the current one should be the same.

        <argument name="previous card id" class="str"/>
    </method>


    <method name="set card type">
        Set optional card type.

        <argument name="card type" class="str"/>
    </method>


    <method name="add signature">
        Add new signature.

        <argument name="signature" class="raw card signature"/>
    </method>


    <method name="add signature disown" visibility="private">
        Add new signature.

        <argument name="signature" class="raw card signature" access="disown"/>
    </method>


    <method name="set is outdated">
        Set whether a Card is outdated or not.

        <argument name="is outdated" type="boolean"/>
    </method>


    <method name="version" is_const="1">
        Return version of Card.

        <return class="str"/>
    </method>


    <method name="identity" is_const="1">
        Return identity of Card.

        <return class="str"/>
    </method>


    <method name="public key" is_const="1">
        Return Public Key data of Card.

        Note, public key can be empty.

        <return class="data"/>
    </method>


    <method name="created at" is_const="1">
        Return date of Card creation.

        <return type="size"/>
    </method>


    <method name="is outdated" is_const="1">
        Return whether Card is outdated or not.

        <return type="boolean"/>
    </method>


    <method name="previous card id" is_const="1">
        Return identifier of previous Card with same identity.

        Note, return empty string if there is no previous card.

        <return class="str"/>
    </method>


    <method name="content snapshot" is_const="1">
        Return Card's content snapshot.

        <return class="data"/>
    </method>


    <method name="signatures" is_const="1">
        Return Card's signatures.

        <return class="raw card signature list"/>
    </method>


    <method name="invalidate content snapshot">
        This method invalidates content snapshot.
        It should be called when content is modified.
    </method>
</class>
