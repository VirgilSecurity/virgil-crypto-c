<class name="virgil http client">
    Virgil HTTP client.
    TODO: Add "virgil-agent" header.


    <require feature="use default http client"/>
    <require interface="http client"/>
    <require impl="http client curl" is_optional="1"/>
    <require impl="http client x" is_optional="1"/>
    <require impl="http client wasm" is_optional="1"/>

    <require header="stdio.h" is_system="1" if_feature="virgil http client debug"/>
    <require header="ctype.h" is_system="1" if_feature="virgil http client debug"/>

    <feature name="debug" default="off"/>

    <constant name="k auth type virgil" type="string" visibility="public">
        Authorization type: Virgil

        <value value="Virgil"/>
    </constant>


    <method name="send">
        Send request over HTTP.

        <argument name="http request" class="http request"/>
        <argument name="error" class="error" access="readwrite"/>

        <return class="http response" access="disown"/>
    </method>


    <method name="send with ca">
        Send request over HTTP with a path to Certificate Authority bundle.

        Note, argument "ca bundle path" can be empty.

        <argument name="http request" class="http request"/>
        <argument name="ca bundle path" class="str"/>
        <argument name="error" class="error" access="readwrite"/>

        <return class="http response" access="disown"/>
    </method>


    <method name="create http client impl" is_static="1" declaration="private">
        Create platform dependent implementation of HTTP Client.

        Note, "ca bundle path" is optional.

        <argument name="ca bundle path" class="str"/>

        <return interface="http client" access="disown"/>
    </method>


    <method name="debug print request" is_static="1" declaration="private">
        Print HTTP request.
        Note, available only if VSSC_VIRGIL_HTTP_CLIENT_DEBUG option is ON.

        <argument name="http request" class="http request"/>
    </method>


    <method name="debug print response" is_static="1" declaration="private">
        Print HTTP response.
        Note, available only if VSSC_VIRGIL_HTTP_CLIENT_DEBUG option is ON.

        <argument name="http response" class="http response"/>
    </method>
</class>
